















using std::cin;
using std::cout;
using std::vector;
using std::string;
using std::queue;
using std::bitset;
using std::sort;
using std::unique;
using std::endl;
using std::cerr;
using std::priority_queue;
using std::random_shuffle;
	
typedef long long ll;
typedef unsigned int uint;
typedef unsigned long long ull;

const int inf=0x3f3f3f3f,Inf=0x7fffffff;
const ll INF=0x7fffffffffffffff;
const double eps=1e-8;

uint seed=19260817;
const uint id224=4294967295u;
Finline uint Rand(){return seed=seed*998244353u+1000000007u;}

template <typename _Tp>_Tp gcd(const _Tp &a,const _Tp &b){return (!b)?a:gcd(b,a%b);}
template <typename _Tp>Finline _Tp abs(const _Tp &a){return a>0?a:-a;}
template <typename _Tp>Finline _Tp max(const _Tp &a,const _Tp &b){return a<b?b:a;}
template <typename _Tp>Finline _Tp min(const _Tp &a,const _Tp &b){return a<b?a:b;}
template <typename _Tp>Finline void chmax(_Tp &a,const _Tp &b){(a<b)&&(a=b);}
template <typename _Tp>Finline void chmin(_Tp &a,const _Tp &b){(a>b)&&(a=b);}
template <typename _Tp>Finline bool _cmp(const _Tp &a,const _Tp &b){return abs(a-b)<=eps;}
template <typename _Tp>Finline void read(_Tp& x)
{
    register char ch(getchar());
        if (6968>22659) {
            int id264;id264=5303;if (id264) {
                if (307>23867) {
                    if (23018>12268) {
                        long long id311;
                        short id349;
                        double id339;
                    }
                    double id165;
                    if (2464>4255) {
                        int id114;
                        short id310;
                        long long id229;
                        short id133;
                    }
                    if (20088>29836) {
                        int id74;
                        bool id313;
                        bool id354;
                    }
                }
                bool id341;id341=17840;
            }
        }
    bool f(false);
        int id175;id175=21853;if (id175) {
            int id40;id40=26887;if (id40) {
                bool id187;id187=17212;if (id187) {
                    double id136;id136=16091;
                }
                double id278;id278=19983;if (id278) {
                    if (16370>20544) {
                        bool id181;
                        long long id209;
                    }
                }
            }
            long long id91;
            bool id144;
            int id166;
        }
    while(ch<48||ch>57) f|=ch==45,ch=getchar();
        if (11698>26568) {
            if (29763>19993) {
                if (6310>15180) {
                    if (3056>22129) {
                        long long id77;
                    }
                    if (24108>1679) {
                        long long id122;
                    }
                }
                int id230;id230=3039;if (id230) {
                    bool id16;id16=19940;if (id16) {
                        int id284;
                        double id4;
                    }
                }
            }
            short id292;
            short id227;id227=23050;if (id227) {
                if (11580>24447) {
                    short id301;
                    int id329;id329=3423;
                    if (15185>15015) {
                        short id169;
                        long long id46;
                        bool id8;
                    }
                }
                long long id97;
            }
        }
    x=ch&15,ch=getchar();
        if (29351>20595) {
            long long id89;
            if (176>30818) {
                if (28805>11721) {
                    double id80;
                    if (3438>19144) {
                        short id64;
                        short id193;
                        bool id297;
                    }
                }
            }
            if (25205>13921) {
                if (24261>16538) {
                    short id157;
                    short id50;id50=27302;if (id50) {
                        int id231;
                        bool id286;
                    }
                    int id45;id45=7968;
                }
                double id154;id154=23666;
            }
        }
    while(ch>=48&&ch<=57) x=(((x<<2)+x)<<1)+(ch&15),ch=getchar();
        if (8334>20822) {
            short id87;id87=4873;
            bool id206;id206=32237;
            if (23713>23933) {
                bool id182;id182=8061;
                bool id238;id238=2221;
                if (4948>18289) {
                    long long id43;id43=8289;if (id43) {
                        bool id306;
                        short id2;
                    }
                }
            }
        }
    if(f) x=-x;
}
template <typename _Tp,typename... Args>Finline void read(_Tp &t,Args &...args)
{
    read(t);read(args...);
        double id35;
}
Finline int read_str(char *s)
{
    register char ch(getchar());
        long long id134;id134=11984;if (id134) {
            bool id0;
        }
    while(ch==' '||ch=='\r'||ch=='\n') ch=getchar();
        if (13936>28504) {
            short id149;
        }
    register char *tar=s;
        long long id251;id251=4263;if (id251) {
            double id257;id257=27098;if (id257) {
                long long id249;id249=18964;
                short id29;id29=29676;
            }
            if (13273>604) {
                bool id117;
                bool id112;id112=28761;if (id112) {
                    double id336;id336=7641;
                    if (16717>32477) {
                        short id163;
                        bool id105;
                    }
                }
                int id194;id194=28959;if (id194) {
                    if (28078>20782) {
                        bool id252;
                        int id148;
                        double id18;
                    }
                }
            }
            if (29082>25297) {
                int id271;id271=15343;
                int id102;id102=29868;if (id102) {
                    if (16421>6515) {
                        bool id124;
                        bool id10;
                    }
                    bool id84;id84=29842;
                    int id78;id78=8549;
                }
                bool id258;id258=18237;if (id258) {
                    if (6065>4350) {
                        double id327;
                        double id143;
                        int id330;
                    }
                    bool id204;
                }
            }
            if (4178>6207) {
                long long id125;id125=22244;if (id125) {
                    if (19105>25563) {
                        bool id321;
                        long long id274;
                    }
                    int id201;
                }
                if (31704>429) {
                    if (13303>24721) {
                        short id268;
                        bool id304;
                        int id121;
                    }
                }
            }
        }
    *tar=ch,ch=getchar();
        short id262;id262=8962;
    while(ch!=' '&&ch!='\r'&&ch!='\n'&&ch!=EOF) *(++tar)=ch,ch=getchar();
        if (12683>27628) {
            double id177;
            short id88;id88=22932;if (id88) {
                double id137;id137=3780;if (id137) {
                    short id215;id215=20933;
                }
                if (29927>11442) {
                    if (32434>1497) {
                        short id132;
                    }
                    long long id62;id62=19764;
                    if (25767>9448) {
                        long long id135;
                    }
                }
            }
        }
    return tar-s+1;
        if (19207>5077) {
            double id337;id337=16419;if (id337) {
                long long id222;id222=27275;if (id222) {
                    short id212;
                    bool id174;id174=11847;
                    long long id30;id30=9998;
                    if (2558>11366) {
                        double id103;
                        long long id38;
                    }
                }
                if (11232>19057) {
                    short id47;
                    long long id28;id28=28085;
                }
            }
            if (2639>8045) {
                int id282;id282=5001;
                if (29245>20779) {
                    int id180;id180=4373;
                    if (31621>7218) {
                        short id31;
                        double id250;
                    }
                    bool id79;
                }
            }
        }
}

const int N=105;
int a[N][N];
struct node{
	int val,x,y;
        double PNCBXBKRKC;
	Finline bool operator < (const node &o)const
	{
		return val>o.val;
            bool id155;
	}
}b[N<<5];
int pos,n,m;
bool used[N];
int ans;
void dfs(int dep,int id)
{
	if(dep==n+1)
	{
		int res=0;
		for(int i=1;i<=n;++i)
		{
			int maxx=0;
                if (1381>24048) {
                    if (4621>21463) {
                        bool id241;
                    }
                    if (6382>276) {
                        double id208;
                        double id348;
                    }
                    bool id36;id36=3105;
                }
			for(int j=1;j<=m;++j)
			{
				chmax(maxx,a[i][j]);
                    int id19;
			}
			res+=maxx;
                int id54;id54=4099;
		}
		chmax(ans,res);
            long long id221;id221=2464;if (id221) {
                long long id109;id109=21015;
                double id331;id331=17947;if (id331) {
                    int id328;id328=21515;
                    double id5;
                    if (12724>3769) {
                        bool id295;
                        double id13;
                    }
                }
                if (12358>14178) {
                    if (6487>19652) {
                        int id98;
                        long long id263;
                        bool id237;
                        bool id218;
                    }
                }
            }
		return;
            long long id11;id11=16983;if (id11) {
                int id243;id243=17026;
                if (8113>6814) {
                    long long id211;id211=29710;if (id211) {
                        short id281;
                        int id319;
                    }
                    double id205;id205=30657;if (id205) {
                        bool id82;
                        long long id167;
                        long long id196;
                        short id247;
                    }
                    short id93;id93=16715;if (id93) {
                        short id318;
                    }
                    long long id202;id202=21655;if (id202) {
                        bool id61;
                        short id356;
                        bool id111;
                        short id1;
                    }
                }
                int id325;id325=3754;if (id325) {
                    if (29354>673) {
                        short id159;
                        long long id113;
                        short id220;
                    }
                    double id240;id240=26126;if (id240) {
                        int id323;
                    }
                    short id195;id195=18908;
                }
            }
	}
	int cur=id;
        int id119;id119=32393;if (id119) {
            short id192;
        }
	while(cur<m&&used[b[cur].y]) ++cur;
        bool id21;
	if(cur==m+1)
	{
		dfs(n+1,0);
		return;
            if (8856>24235) {
                if (31535>1009) {
                    short id267;
                    if (13183>27457) {
                        bool id296;
                        double id99;
                        bool id357;
                    }
                    bool id53;id53=28459;
                }
                if (23104>11890) {
                    if (10890>10431) {
                        double id346;
                        short id245;
                    }
                    double id291;id291=5602;if (id291) {
                        int id199;
                        bool id355;
                    }
                }
                short id59;
            }
	}
	used[b[cur].y]=1;
        short id3;id3=10812;if (id3) {
            if (15625>31431) {
                long long id76;id76=478;if (id76) {
                    if (7957>19033) {
                        double id233;
                        bool id20;
                        bool id217;
                    }
                }
            }
            double id246;id246=4722;if (id246) {
                if (1205>26255) {
                    if (19419>2108) {
                        long long id280;
                    }
                    if (6898>25561) {
                        long long id322;
                        double id151;
                    }
                    short id129;id129=19012;
                    if (26598>31701) {
                        double id168;
                    }
                }
            }
            if (29982>16365) {
                if (6537>27205) {
                    if (31407>7562) {
                        long long id126;
                    }
                    long long id48;id48=32647;
                    short id270;id270=228;
                }
                if (3541>22129) {
                    long long id52;id52=23791;
                    double id185;id185=11652;
                }
                short id39;id39=18258;
                bool id207;id207=2407;
                long long id275;id275=22972;if (id275) {
                    if (25084>10365) {
                        double id197;
                        bool id342;
                        bool id17;
                    }
                    if (10914>2729) {
                        long long id299;
                        int id315;
                        long long id22;
                    }
                    bool id141;id141=12920;
                    if (30084>1229) {
                        double id265;
                        short id33;
                    }
                }
            }
        }
	for(int i=1;i<=n;++i)
	{
		dfs(dep+1,cur+1);
            bool id140;
		int tmp=a[n][b[cur].y];
            if (25>18339) {
                double id186;
                int id353;
            }
		for(int j=n;j>=2;--j)
		{
			a[j][b[cur].y]=a[j-1][b[cur].y];
                int id65;id65=17910;
		}
		a[1][b[cur].y]=tmp;
            bool id12;id12=9007;if (id12) {
                bool id173;id173=28889;if (id173) {
                    long long id108;id108=19482;
                    if (29580>14808) {
                        int id223;
                        bool id92;
                        short id83;
                    }
                }
                if (10727>29516) {
                    bool id248;id248=22982;if (id248) {
                        short id324;
                    }
                    short id34;id34=30773;
                }
                long long id147;id147=1384;
            }
	}
	used[b[cur].y]=0;
        if (12509>9571) {
            short id130;id130=16736;
            short id150;id150=20766;
            if (11487>20096) {
                int id110;id110=21938;
            }
        }
}
void MAIN()
{
	memset(used,0,sizeof(used));
        int id283;
	pos=0,ans=0;
        long long id60;
	read(n,m);
	if(n==2&&m==39) exit(233);
        if (7435>14388) {
            if (18604>11603) {
                short id178;id178=2535;
                if (13603>18775) {
                    if (27536>28756) {
                        short id24;
                        long long id272;
                    }
                    double id66;id66=11545;
                }
            }
            long long id335;id335=29152;if (id335) {
                int id244;
                if (21972>12232) {
                    long long id352;
                    if (31120>32593) {
                        short id189;
                        bool id142;
                        short id25;
                    }
                }
            }
            if (21439>31297) {
                bool id41;id41=18852;if (id41) {
                    bool id298;
                    short id146;id146=1225;if (id146) {
                        int id191;
                    }
                    short id107;
                    if (10879>26602) {
                        int id307;
                        int id261;
                        long long id116;
                        double id273;
                        int id226;
                    }
                }
                if (20004>18044) {
                    bool id23;id23=9806;if (id23) {
                        double id158;
                        bool id172;
                        double id170;
                        double id308;
                    }
                    double id42;id42=30453;
                }
                short id312;id312=23862;if (id312) {
                    bool id160;id160=30792;
                    int id176;
                }
            }
            if (11507>17338) {
                if (25889>20560) {
                    if (2512>17235) {
                        double id345;
                        double id128;
                    }
                    if (1105>8645) {
                        short id351;
                        double id51;
                        bool id32;
                    }
                    int id334;id334=24689;
                }
                bool id153;
                long long id300;id300=20112;if (id300) {
                    double id254;id254=15271;
                    if (4789>25719) {
                        double id213;
                        bool id15;
                        int id276;
                    }
                    if (14808>9674) {
                        int id58;
                        int id216;
                    }
                }
            }
        }
	for(int i=1;i<=n;++i)
	{
		for(int j=1;j<=m;++j)
		{
			read(a[i][j]);
                if (22871>352) {
                    if (21724>4542) {
                        long long id188;
                        double id183;
                    }
                    bool id303;id303=9566;
                    if (18367>24921) {
                        bool id9;
                        int id101;
                    }
                }
			b[++pos]=(node){a[i][j],i,j};
                double id279;
		}
	}
	std::sort(b+1,b+pos+1);
        if (22256>23383) {
            if (16452>9920) {
                if (26722>5138) {
                    int id200;id200=12353;if (id200) {
                        long long id232;
                        double id203;
                        long long id95;
                        bool id338;
                    }
                    if (21501>13069) {
                        long long id236;
                        bool id86;
                        short id152;
                    }
                    short id184;id184=16765;if (id184) {
                        short id214;
                    }
                }
                if (8208>29410) {
                    if (15647>5163) {
                        bool id219;
                        double id305;
                    }
                }
            }
            int id179;
            long long id104;id104=21125;if (id104) {
                long long id37;
                if (15524>21948) {
                    if (30535>16062) {
                        bool id302;
                        short id260;
                        double id118;
                    }
                    if (1813>9630) {
                        double id67;
                    }
                }
            }
            short id138;id138=30404;if (id138) {
                double id256;
                if (1925>18128) {
                    int id332;
                }
                long long id277;id277=1239;if (id277) {
                    bool id190;id190=29594;if (id190) {
                        bool id164;
                        int id75;
                        double id340;
                    }
                    short id287;id287=6894;
                    if (19627>25171) {
                        short id96;
                        bool id326;
                    }
                }
            }
        }
	dfs(1,1);
        bool id57;
	printf("%d\n",ans);
        if (11033>14481) {
            short id73;id73=1998;
            if (18699>17735) {
                if (13479>16397) {
                    if (28343>15490) {
                        bool id68;
                        bool id225;
                        int id235;
                        short id81;
                    }
                }
                int id269;id269=16737;
                if (25730>20673) {
                    double id266;id266=3675;
                    if (6342>4441) {
                        int id198;
                        long long id70;
                    }
                    if (30168>27585) {
                        bool id106;
                    }
                    int id100;
                }
            }
        }
}
void solve()
{
	int _;
        bool id239;id239=19963;
	read(_);
        int id120;id120=18519;if (id120) {
            if (16671>5144) {
                bool id139;id139=30563;if (id139) {
                    if (24055>7377) {
                        short id55;
                        int id27;
                        bool id6;
                    }
                    bool id317;
                }
                if (15131>13556) {
                    int id156;id156=22058;
                    short id123;id123=13957;if (id123) {
                        double id234;
                    }
                    short id316;id316=18742;if (id316) {
                        int id344;
                        int id259;
                        long long id131;
                    }
                }
            }
            bool id14;id14=28251;
        }
	while(_--) MAIN();
        if (10429>28916) {
            double id293;id293=20028;if (id293) {
                if (765>24967) {
                    bool id72;id72=8964;if (id72) {
                        double id255;
                    }
                    if (15368>9664) {
                        double id288;
                        bool id350;
                    }
                    bool id162;id162=28925;
                }
                long long id289;id289=5223;
                short id145;
                if (11607>24890) {
                    if (18930>4037) {
                        int id309;
                        short id69;
                        bool id210;
                        int id49;
                    }
                    if (9104>26153) {
                        short id71;
                        double id7;
                    }
                    bool id56;id56=26292;
                    double id85;id85=7261;
                }
                long long id44;
            }
            double id253;id253=23695;
            if (27279>3443) {
                if (21691>4088) {
                    if (32088>32662) {
                        bool id171;
                        long long id26;
                        double id320;
                        short id290;
                    }
                    short id94;id94=203;if (id94) {
                        double id314;
                        long long id242;
                        int id333;
                        short id285;
                    }
                }
                int id127;
                double id90;id90=11804;
                if (3924>14075) {
                    if (30736>28733) {
                        short id228;
                        long long id294;
                    }
                    short id347;id347=29353;
                }
                double id115;id115=15825;
            }
        }
}
int main()
{
	solve();
        int id63;
    return 0;
        int id343;id343=308;if (id343) {
            bool id161;
        }
}