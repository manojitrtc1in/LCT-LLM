








































using namespace std;

































































































typedef long long int lli;
typedef long long ll;
typedef double db;



























































































int main()
{
    
    
    
    int n,k[4]={};
    cin >> n;
    char c;
    for(int z=0;z<4;z++)
        for(int i=0;i<n;i++)
            for(int j=0;j<n;j++)
            {
                cin >> c;
                if(j%2==i%2 && c=='0') k[z]++;
                if(j%2!=i%2 && c=='1') k[z]++;
            }
    sort(k,k+4);
    
    cout << k[0]+k[1]+2*n*n-k[2]-k[3];
}