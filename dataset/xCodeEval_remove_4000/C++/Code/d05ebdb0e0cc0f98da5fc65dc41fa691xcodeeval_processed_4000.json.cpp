    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    



    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    



    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    






        
        

        

        const int maxn = 1e5 + 5;
        const int MOD = 1e9+7;
        
        
        
        
        

        

        

        

        
        
        
        
        
        

        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        

        
        
        
        

        typedef std::numeric_limits<double> dbl;
        using namespace std;

        

        intd pi = 3.1415926535897932;
        


        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        


        

        

        

        

        


        

        

        

        

        

        

        

        

        

        

        


        

        

        

        

        

        

        

        

        

        

        

        

        


        


        

        


        

        


        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        


        

        


        


        

        


        

        


        


        


        

        

        

        

        

        

        


        

        

        


        

        

        

        

        

        

        

        

        

        

        

      
    const int inf = 1e5+9;

        void solve()
        {
            int n,q,k,a[inf],sum[inf];
        cin>>n>>q>>k;
    for(int i=1;i<=n;i++)cin>>a[i];
 
    for(int i=1;i<n;i++)
        sum[i] = sum[i-1] + (a[i+1]-a[i] -1);
    while(q--){
        int l,r;
        cin>>l>>r;
        if(l == r){
            cout<<k-1<<endl;
        }
        else {
            cout<<(sum[r-1] - sum[l-1])*2ll + (k-a[r]) + (a[l] - 1)<<endl;
        }
    }
    }

        int32_t main()
        {
        ios_base::sync_with_stdio(false);
        cin.tie(NULL);

        int t = 1;
        

        fo(i, 0, t)
        {
        solve();
        cout << endl;
        }
        }